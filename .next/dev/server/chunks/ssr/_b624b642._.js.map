{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/components/HeaderBar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { Phone } from 'lucide-react';\r\n\r\ninterface HeaderBarProps {\r\n  onCallClick: () => void;\r\n}\r\n\r\nexport function HeaderBar({ onCallClick }: HeaderBarProps) {\r\n  return (\r\n    <header\r\n      className=\"sticky top-0 z-50 backdrop-blur-xl border-b\"\r\n      style={{\r\n        backgroundColor: 'var(--header-bg)',\r\n        borderColor: 'var(--header-border)',\r\n      }}\r\n    >\r\n      <div className=\"max-w-4xl mx-auto px-6 h-[70px] flex items-center justify-between\">\r\n        {/* Left: Avatar + Name */}\r\n        <div className=\"flex items-center gap-3\">\r\n          {/* Avatar */}\r\n          <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-md\">\r\n            <span className=\"text-white font-semibold text-sm\">AI</span>\r\n          </div>\r\n\r\n          {/* Name & Status */}\r\n          <div>\r\n            <h1 className=\"font-semibold text-[15px] tracking-tight\">\r\n              AI Assistant\r\n            </h1>\r\n            <p className=\"text-xs opacity-60\">Online</p>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right: Call Button */}\r\n        <button\r\n          onClick={onCallClick}\r\n          className=\"w-10 h-10 rounded-full flex items-center justify-center transition-all duration-200 hover:scale-105 active:scale-95\"\r\n          style={{\r\n            backgroundColor: 'var(--surface-elevated)',\r\n          }}\r\n          aria-label=\"Start call\"\r\n        >\r\n          <Phone className=\"w-5 h-5\" style={{ color: 'var(--accent)' }} />\r\n        </button>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,SAAS,UAAU,EAAE,WAAW,EAAkB;IACvD,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YACL,iBAAiB;YACjB,aAAa;QACf;kBAEA,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCAEb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;0CAAmC;;;;;;;;;;;sCAIrD,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAA2C;;;;;;8CAGzD,8OAAC;oCAAE,WAAU;8CAAqB;;;;;;;;;;;;;;;;;;8BAKtC,8OAAC;oBACC,SAAS;oBACT,WAAU;oBACV,OAAO;wBACL,iBAAiB;oBACnB;oBACA,cAAW;8BAEX,cAAA,8OAAC,6MAAK;wBAAC,WAAU;wBAAU,OAAO;4BAAE,OAAO;wBAAgB;;;;;;;;;;;;;;;;;;;;;;AAKrE"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/components/ChatBubble.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface Message {\r\n  id: string;\r\n  text: string;\r\n  sender: 'user' | 'ai';\r\n  timestamp: Date;\r\n}\r\n\r\ninterface ChatBubbleProps {\r\n  message: Message;\r\n}\r\n\r\nexport function ChatBubble({ message }: ChatBubbleProps) {\r\n  const isUser = message.sender === 'user';\r\n\r\n  // Format timestamp\r\n  const time = message.timestamp.toLocaleTimeString('id-ID', {\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  });\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      transition={{ duration: 0.3, ease: 'easeOut' }}\r\n      className={`flex mb-4 ${isUser ? 'justify-end' : 'justify-start'}`}\r\n    >\r\n      <div\r\n        className={`max-w-[75%] rounded-2xl px-4 py-3 shadow-sm ${isUser ? 'rounded-br-md' : 'rounded-bl-md'\r\n          }`}\r\n        style={{\r\n          backgroundColor: isUser ? 'var(--user-bubble-bg)' : 'var(--ai-bubble-bg)',\r\n          color: isUser ? 'var(--user-bubble-text)' : 'var(--ai-bubble-text)',\r\n        }}\r\n      >\r\n        {/* Message Text */}\r\n        <p className=\"text-[15px] leading-relaxed whitespace-pre-wrap break-words\">\r\n          {message.text}\r\n        </p>\r\n\r\n        {/* Timestamp */}\r\n        <p\r\n          className={`text-[11px] mt-1 ${isUser ? 'text-right' : 'text-left'}`}\r\n          style={{ opacity: 0.6 }}\r\n        >\r\n          {time}\r\n        </p>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAeO,SAAS,WAAW,EAAE,OAAO,EAAmB;IACrD,MAAM,SAAS,QAAQ,MAAM,KAAK;IAElC,mBAAmB;IACnB,MAAM,OAAO,QAAQ,SAAS,CAAC,kBAAkB,CAAC,SAAS;QACzD,MAAM;QACN,QAAQ;IACV;IAEA,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,UAAU;YAAK,MAAM;QAAU;QAC7C,WAAW,CAAC,UAAU,EAAE,SAAS,gBAAgB,iBAAiB;kBAElE,cAAA,8OAAC;YACC,WAAW,CAAC,4CAA4C,EAAE,SAAS,kBAAkB,iBACjF;YACJ,OAAO;gBACL,iBAAiB,SAAS,0BAA0B;gBACpD,OAAO,SAAS,4BAA4B;YAC9C;;8BAGA,8OAAC;oBAAE,WAAU;8BACV,QAAQ,IAAI;;;;;;8BAIf,8OAAC;oBACC,WAAW,CAAC,iBAAiB,EAAE,SAAS,eAAe,aAAa;oBACpE,OAAO;wBAAE,SAAS;oBAAI;8BAErB;;;;;;;;;;;;;;;;;AAKX"}},
    {"offset": {"line": 181, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/components/InputBar.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, FormEvent, useRef, useEffect } from 'react';\r\nimport { Mic, ArrowUp } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface InputBarProps {\r\n  onSendMessage: (text: string) => void;\r\n}\r\n\r\nexport function InputBar({ onSendMessage }: InputBarProps) {\r\n  const [inputText, setInputText] = useState('');\r\n  const [isRecording, setIsRecording] = useState(false);\r\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n  // Auto-resize textarea based on content\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto';\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\r\n    }\r\n  }, [inputText]);\r\n\r\n  const handleSubmit = (e: FormEvent) => {\r\n    e.preventDefault();\r\n    if (inputText.trim()) {\r\n      onSendMessage(inputText);\r\n      setInputText('');\r\n      // Reset textarea height\r\n      if (textareaRef.current) {\r\n        textareaRef.current.style.height = 'auto';\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleMicClick = () => {\r\n    setIsRecording(!isRecording);\r\n    if (!isRecording) {\r\n      console.log('Start recording voice note...');\r\n      // TODO: Implement voice recording\r\n    } else {\r\n      console.log('Stop recording voice note...');\r\n      // TODO: Stop recording and send\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLTextAreaElement>) => {\r\n    // Submit on Enter (without Shift)\r\n    if (e.key === 'Enter' && !e.shiftKey) {\r\n      e.preventDefault();\r\n      handleSubmit(e);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"fixed bottom-0 left-0 right-0 border-t backdrop-blur-xl\"\r\n      style={{\r\n        backgroundColor: 'var(--input-bg)',\r\n        borderColor: 'var(--header-border)',\r\n      }}\r\n    >\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        className=\"max-w-4xl mx-auto p-4\"\r\n      >\r\n        <div\r\n          className=\"flex items-end gap-2 rounded-full px-4 py-2 shadow-sm\"\r\n          style={{\r\n            backgroundColor: 'var(--input-field-bg)',\r\n          }}\r\n        >\r\n          {/* Microphone Button */}\r\n          <button\r\n            type=\"button\"\r\n            onClick={handleMicClick}\r\n            className={`p-2 rounded-full transition-all flex-shrink-0 ${isRecording\r\n                ? 'bg-red-500 text-white'\r\n                : 'hover:bg-black/5 dark:hover:bg-white/5'\r\n              }`}\r\n            aria-label=\"Voice note\"\r\n          >\r\n            <Mic className={`w-5 h-5 ${isRecording ? 'animate-pulse' : ''}`} />\r\n          </button>\r\n\r\n          {/* Textarea Field */}\r\n          <textarea\r\n            ref={textareaRef}\r\n            value={inputText}\r\n            onChange={(e) => setInputText(e.target.value)}\r\n            onKeyDown={handleKeyDown}\r\n            placeholder=\"Ketik pesan...\"\r\n            rows={1}\r\n            className=\"flex-1 bg-transparent outline-none text-[15px] placeholder:opacity-50 resize-none max-h-[120px] overflow-y-auto py-2\"\r\n            style={{\r\n              minHeight: '24px',\r\n            }}\r\n          />\r\n\r\n          {/* Send Button - Only show when there's text */}\r\n          <AnimatePresence>\r\n            {inputText.trim() && (\r\n              <motion.button\r\n                initial={{ scale: 0, opacity: 0 }}\r\n                animate={{ scale: 1, opacity: 1 }}\r\n                exit={{ scale: 0, opacity: 0 }}\r\n                transition={{ duration: 0.15 }}\r\n                type=\"submit\"\r\n                className=\"p-2 rounded-full transition-all flex-shrink-0 shadow-md hover:shadow-lg active:scale-95\"\r\n                style={{\r\n                  backgroundColor: 'var(--accent)',\r\n                }}\r\n                aria-label=\"Send message\"\r\n              >\r\n                <ArrowUp className=\"w-5 h-5 text-white\" strokeWidth={2.5} />\r\n              </motion.button>\r\n            )}\r\n          </AnimatePresence>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AAJA;;;;;AAUO,SAAS,SAAS,EAAE,aAAa,EAAiB;IACvD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,cAAc,IAAA,+MAAM,EAAsB;IAEhD,wCAAwC;IACxC,IAAA,kNAAS,EAAC;QACR,IAAI,YAAY,OAAO,EAAE;YACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;YACnC,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG,GAAG,YAAY,OAAO,CAAC,YAAY,CAAC,EAAE,CAAC;QAC5E;IACF,GAAG;QAAC;KAAU;IAEd,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,IAAI,UAAU,IAAI,IAAI;YACpB,cAAc;YACd,aAAa;YACb,wBAAwB;YACxB,IAAI,YAAY,OAAO,EAAE;gBACvB,YAAY,OAAO,CAAC,KAAK,CAAC,MAAM,GAAG;YACrC;QACF;IACF;IAEA,MAAM,iBAAiB;QACrB,eAAe,CAAC;QAChB,IAAI,CAAC,aAAa;YAChB,QAAQ,GAAG,CAAC;QACZ,kCAAkC;QACpC,OAAO;YACL,QAAQ,GAAG,CAAC;QACZ,gCAAgC;QAClC;IACF;IAEA,MAAM,gBAAgB,CAAC;QACrB,kCAAkC;QAClC,IAAI,EAAE,GAAG,KAAK,WAAW,CAAC,EAAE,QAAQ,EAAE;YACpC,EAAE,cAAc;YAChB,aAAa;QACf;IACF;IAEA,qBACE,8OAAC;QACC,WAAU;QACV,OAAO;YACL,iBAAiB;YACjB,aAAa;QACf;kBAEA,cAAA,8OAAC;YACC,UAAU;YACV,WAAU;sBAEV,cAAA,8OAAC;gBACC,WAAU;gBACV,OAAO;oBACL,iBAAiB;gBACnB;;kCAGA,8OAAC;wBACC,MAAK;wBACL,SAAS;wBACT,WAAW,CAAC,8CAA8C,EAAE,cACtD,0BACA,0CACF;wBACJ,cAAW;kCAEX,cAAA,8OAAC,uMAAG;4BAAC,WAAW,CAAC,QAAQ,EAAE,cAAc,kBAAkB,IAAI;;;;;;;;;;;kCAIjE,8OAAC;wBACC,KAAK;wBACL,OAAO;wBACP,UAAU,CAAC,IAAM,aAAa,EAAE,MAAM,CAAC,KAAK;wBAC5C,WAAW;wBACX,aAAY;wBACZ,MAAM;wBACN,WAAU;wBACV,OAAO;4BACL,WAAW;wBACb;;;;;;kCAIF,8OAAC,4MAAe;kCACb,UAAU,IAAI,oBACb,8OAAC,oMAAM,CAAC,MAAM;4BACZ,SAAS;gCAAE,OAAO;gCAAG,SAAS;4BAAE;4BAChC,SAAS;gCAAE,OAAO;gCAAG,SAAS;4BAAE;4BAChC,MAAM;gCAAE,OAAO;gCAAG,SAAS;4BAAE;4BAC7B,YAAY;gCAAE,UAAU;4BAAK;4BAC7B,MAAK;4BACL,WAAU;4BACV,OAAO;gCACL,iBAAiB;4BACnB;4BACA,cAAW;sCAEX,cAAA,8OAAC,uNAAO;gCAAC,WAAU;gCAAqB,aAAa;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQrE"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/hooks/useRealtimeWebRTC.ts"],"sourcesContent":["import { useState, useEffect, useRef, useCallback } from \"react\";\r\n\r\nexport type ConnectionStatus =\r\n  | \"idle\"\r\n  | \"connecting\"\r\n  | \"connected\"\r\n  | \"disconnected\"\r\n  | \"error\";\r\n\r\nexport interface RealtimeWebRTCState {\r\n  status: ConnectionStatus;\r\n  error: string | null;\r\n  transcript: string;\r\n  aiResponse: string;\r\n  isMuted: boolean;\r\n  audioLevel: number;\r\n}\r\n\r\nexport interface RealtimeWebRTCActions {\r\n  connect: (token: string) => Promise<void>;\r\n  disconnect: () => void;\r\n  toggleMute: () => void;\r\n  setMuted: (muted: boolean) => void;\r\n}\r\n\r\nexport function useRealtimeWebRTC(): [\r\n  RealtimeWebRTCState,\r\n  RealtimeWebRTCActions\r\n] {\r\n  const [status, setStatus] = useState<ConnectionStatus>(\"idle\");\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [transcript, setTranscript] = useState(\"\");\r\n  const [aiResponse, setAiResponse] = useState(\"\");\r\n  const [isMuted, setIsMuted] = useState(false);\r\n  const [audioLevel, setAudioLevel] = useState(0);\r\n\r\n  const peerConnectionRef = useRef<RTCPeerConnection | null>(null);\r\n  const dataChannelRef = useRef<RTCDataChannel | null>(null);\r\n  const audioStreamRef = useRef<MediaStream | null>(null);\r\n  const audioContextRef = useRef<AudioContext | null>(null);\r\n  const analyserRef = useRef<AnalyserNode | null>(null);\r\n  const animationFrameRef = useRef<number | null>(null);\r\n\r\n  // Monitor audio level\r\n  const monitorAudioLevel = useCallback(() => {\r\n    if (!analyserRef.current) return;\r\n\r\n    const dataArray = new Uint8Array(analyserRef.current.frequencyBinCount);\r\n\r\n    const checkLevel = () => {\r\n      if (!analyserRef.current) return;\r\n\r\n      analyserRef.current.getByteFrequencyData(dataArray);\r\n      const average = dataArray.reduce((a, b) => a + b) / dataArray.length;\r\n      setAudioLevel(average / 255);\r\n\r\n      animationFrameRef.current = requestAnimationFrame(checkLevel);\r\n    };\r\n\r\n    checkLevel();\r\n  }, []);\r\n\r\n  // Disconnect\r\n  const disconnect = useCallback(() => {\r\n    // Stop animation frame\r\n    if (animationFrameRef.current) {\r\n      cancelAnimationFrame(animationFrameRef.current);\r\n      animationFrameRef.current = null;\r\n    }\r\n\r\n    // Close data channel\r\n    if (dataChannelRef.current) {\r\n      dataChannelRef.current.close();\r\n      dataChannelRef.current = null;\r\n    }\r\n\r\n    // Close peer connection\r\n    if (peerConnectionRef.current) {\r\n      peerConnectionRef.current.close();\r\n      peerConnectionRef.current = null;\r\n    }\r\n\r\n    // Stop audio stream\r\n    if (audioStreamRef.current) {\r\n      audioStreamRef.current.getTracks().forEach((track) => track.stop());\r\n      audioStreamRef.current = null;\r\n    }\r\n\r\n    // Close audio context\r\n    if (audioContextRef.current) {\r\n      audioContextRef.current.close();\r\n      audioContextRef.current = null;\r\n    }\r\n\r\n    analyserRef.current = null;\r\n    setStatus(\"disconnected\");\r\n  }, []);\r\n\r\n  // Connect to WebRTC\r\n  const connect = useCallback(\r\n    async (token: string) => {\r\n      try {\r\n        setStatus(\"connecting\");\r\n        setError(null);\r\n\r\n        // Create peer connection\r\n        const pc = new RTCPeerConnection();\r\n        peerConnectionRef.current = pc;\r\n\r\n        // Handle incoming audio from model\r\n        pc.ontrack = (event) => {\r\n          const [stream] = event.streams;\r\n          const remoteAudio = new Audio();\r\n          remoteAudio.srcObject = stream;\r\n          remoteAudio.autoplay = true;\r\n          remoteAudio.play().catch(console.error);\r\n        };\r\n\r\n        // Get user media and add to peer connection\r\n        const stream = await navigator.mediaDevices.getUserMedia({\r\n          audio: true,\r\n        });\r\n        audioStreamRef.current = stream;\r\n\r\n        // Add mic tracks to peer connection\r\n        for (const track of stream.getTracks()) {\r\n          pc.addTrack(track, stream);\r\n        }\r\n\r\n        // Ensure we can receive audio from the model\r\n        pc.addTransceiver(\"audio\", { direction: \"recvonly\" });\r\n\r\n        // Setup audio context for visualization\r\n        audioContextRef.current = new AudioContext();\r\n        analyserRef.current = audioContextRef.current.createAnalyser();\r\n        analyserRef.current.fftSize = 256;\r\n\r\n        const source = audioContextRef.current.createMediaStreamSource(stream);\r\n        source.connect(analyserRef.current);\r\n\r\n        monitorAudioLevel();\r\n\r\n        // Data channel for Realtime events\r\n        const dataChannel = pc.createDataChannel(\"oai-events\");\r\n        dataChannelRef.current = dataChannel;\r\n\r\n        dataChannel.onopen = () => {\r\n          console.log(\"Data channel opened\");\r\n          setStatus(\"connected\");\r\n        };\r\n\r\n        dataChannel.onmessage = (event) => {\r\n          try {\r\n            const message = JSON.parse(event.data);\r\n            console.log(\"Received event:\", message.type, message);\r\n\r\n            // Handle different message types\r\n            if (message.type === \"response.audio_transcript.done\") {\r\n              setTranscript(message.transcript || \"\");\r\n            } else if (message.type === \"response.done\") {\r\n              const text =\r\n                message.response?.output?.[0]?.content?.[0]?.transcript;\r\n              if (text) setAiResponse(text);\r\n            }\r\n          } catch (err) {\r\n            console.error(\"Failed to parse data channel message:\", err);\r\n          }\r\n        };\r\n\r\n        dataChannel.onerror = (err) => {\r\n          console.error(\"Data channel error:\", err);\r\n          setError(\"Data channel error occurred\");\r\n        };\r\n\r\n        // Create and set local description\r\n        const offer = await pc.createOffer();\r\n        await pc.setLocalDescription(offer);\r\n\r\n        // Send SDP offer to OpenAI Realtime WebRTC endpoint\r\n        console.log(\"Using token:\", token.substring(0, 20) + \"...\");\r\n        const model = \"gpt-realtime-mini-2025-10-06\";\r\n        const sdpResp = await fetch(\r\n          `https://api.openai.com/v1/realtime?model=${encodeURIComponent(\r\n            model\r\n          )}`,\r\n          {\r\n            method: \"POST\",\r\n            body: offer.sdp,\r\n            headers: {\r\n              Authorization: `Bearer ${token}`,\r\n              \"Content-Type\": \"application/sdp\",\r\n              \"OpenAI-Beta\": \"realtime=v1\",\r\n            },\r\n          }\r\n        );\r\n\r\n        if (!sdpResp.ok) {\r\n          const t = await sdpResp.text();\r\n          console.error(\"SDP Response Error:\", t);\r\n          throw new Error(`SDP failed: ${sdpResp.status} ${t}`);\r\n        }\r\n\r\n        const answerSDP = await sdpResp.text();\r\n        console.log(\"Received SDP answer:\", answerSDP.substring(0, 200));\r\n\r\n        await pc.setRemoteDescription({ type: \"answer\", sdp: answerSDP });\r\n        console.log(\"Remote description set successfully\");\r\n      } catch (err) {\r\n        console.error(\"WebRTC connection error:\", err);\r\n        const errorObj = err as unknown;\r\n        // console.error(\"Error details:\", {\r\n        //   name: errorObj?.name,\r\n        //   message: errorObj?.message,\r\n        //   stack: errorObj?.stack,\r\n        // });\r\n        setStatus(\"error\");\r\n        setError(\r\n          err instanceof Error\r\n            ? err.message\r\n            : `Connection failed: ${JSON.stringify(err)}`\r\n        );\r\n        disconnect();\r\n      }\r\n    },\r\n    [disconnect, monitorAudioLevel]\r\n  );\r\n\r\n  // Toggle mute\r\n  const toggleMute = useCallback(() => {\r\n    if (audioStreamRef.current) {\r\n      const audioTrack = audioStreamRef.current.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !audioTrack.enabled;\r\n        setIsMuted(!audioTrack.enabled);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Set muted state\r\n  const setMutedState = useCallback((muted: boolean) => {\r\n    if (audioStreamRef.current) {\r\n      const audioTrack = audioStreamRef.current.getAudioTracks()[0];\r\n      if (audioTrack) {\r\n        audioTrack.enabled = !muted;\r\n        setIsMuted(muted);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      disconnect();\r\n    };\r\n  }, [disconnect]);\r\n\r\n  return [\r\n    {\r\n      status,\r\n      error,\r\n      transcript,\r\n      aiResponse,\r\n      isMuted,\r\n      audioLevel,\r\n    },\r\n    {\r\n      connect,\r\n      disconnect,\r\n      toggleMute,\r\n      setMuted: setMutedState,\r\n    },\r\n  ];\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 563, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/lib/realtime-api.ts"],"sourcesContent":["// Realtime API utilities\r\n\r\nexport interface RealtimeSessionResponse {\r\n  errorCode: number;\r\n  message: string;\r\n  result: {\r\n    object: string;\r\n    id: string;\r\n    model: string;\r\n    modalities: string[];\r\n    instructions: string;\r\n    voice: string;\r\n    output_audio_format: string;\r\n    tools: any[];\r\n    tool_choice: string;\r\n    temperature: number;\r\n    max_response_output_tokens: string;\r\n    turn_detection: {\r\n      type: string;\r\n      threshold: number;\r\n      prefix_padding_ms: number;\r\n      silence_duration_ms: number;\r\n      idle_timeout_ms: number | null;\r\n      create_response: boolean;\r\n      interrupt_response: boolean;\r\n    };\r\n    speed: number;\r\n    tracing: any;\r\n    truncation: string;\r\n    prompt: any;\r\n    expires_at: number;\r\n    input_audio_noise_reduction: any;\r\n    input_audio_format: string;\r\n    input_audio_transcription: any;\r\n    client_secret: {\r\n      value: string;\r\n      expires_at: number;\r\n    };\r\n    include: any;\r\n  };\r\n}\r\n\r\nexport interface RealtimeSessionPayload {\r\n  prompt: string;\r\n  voice: \"alloy\" | \"echo\" | \"fable\" | \"onyx\" | \"nova\" | \"shimmer\";\r\n}\r\n\r\n/**\r\n * Create a new realtime session with the API\r\n */\r\nexport async function createRealtimeSession(\r\n  payload: RealtimeSessionPayload\r\n): Promise<string> {\r\n  try {\r\n    const response = await fetch(\r\n      process.env.NEXT_PUBLIC_REALTIME_API_URL ||\r\n        \"https://apiceritain.indonesiacore.com/api/realtime/session\",\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(payload),\r\n      }\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(`API Error: ${response.status} ${response.statusText}`);\r\n    }\r\n\r\n    const data: RealtimeSessionResponse = await response.json();\r\n\r\n    console.log(\"Session created:\", {\r\n      sessionId: data.result?.id,\r\n      expiresAt: data.result?.client_secret?.expires_at,\r\n    });\r\n\r\n    // Check for API error\r\n    if (data.errorCode !== 0) {\r\n      throw new Error(`API Error: ${data.message}`);\r\n    }\r\n\r\n    // Extract client_secret from result\r\n    if (!data.result?.client_secret?.value) {\r\n      throw new Error(\"Invalid response: missing result.client_secret.value\");\r\n    }\r\n\r\n    return data.result.client_secret.value;\r\n  } catch (error) {\r\n    console.error(\"Failed to create realtime session:\", error);\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,yBAAyB;;;;;AAkDlB,eAAe,sBACpB,OAA+B;IAE/B,IAAI;QACF,MAAM,WAAW,MAAM,MACrB,QAAQ,GAAG,CAAC,4BAA4B,IACtC,8DACF;YACE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAGF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;QACxE;QAEA,MAAM,OAAgC,MAAM,SAAS,IAAI;QAEzD,QAAQ,GAAG,CAAC,oBAAoB;YAC9B,WAAW,KAAK,MAAM,EAAE;YACxB,WAAW,KAAK,MAAM,EAAE,eAAe;QACzC;QAEA,sBAAsB;QACtB,IAAI,KAAK,SAAS,KAAK,GAAG;YACxB,MAAM,IAAI,MAAM,CAAC,WAAW,EAAE,KAAK,OAAO,EAAE;QAC9C;QAEA,oCAAoC;QACpC,IAAI,CAAC,KAAK,MAAM,EAAE,eAAe,OAAO;YACtC,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO,KAAK,MAAM,CAAC,aAAa,CAAC,KAAK;IACxC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sCAAsC;QACpD,MAAM;IACR;AACF"}},
    {"offset": {"line": 603, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/components/CallPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { motion, AnimatePresence } from \"framer-motion\";\r\nimport {\r\n  PhoneOff,\r\n  Mic,\r\n  MicOff,\r\n  Volume2,\r\n  VolumeX,\r\n  AlertCircle,\r\n  RefreshCw,\r\n} from \"lucide-react\";\r\nimport { useRealtimeWebRTC } from \"@/hooks/useRealtimeWebRTC\";\r\nimport { createRealtimeSession } from \"@/lib/realtime-api\";\r\n\r\ninterface CallPageProps {\r\n  onEndCall: () => void;\r\n  contactName?: string;\r\n  contactAvatar?: string;\r\n}\r\n\r\nexport function CallPage({\r\n  onEndCall,\r\n  contactName = \"Psikolog AI\",\r\n  contactAvatar,\r\n}: CallPageProps) {\r\n  const [callDuration, setCallDuration] = useState(0);\r\n  const [isSpeakerOn, setIsSpeakerOn] = useState(true);\r\n  const [showError, setShowError] = useState(false);\r\n  const [isRetrying, setIsRetrying] = useState(false);\r\n  const [micPermission, setMicPermission] = useState<\r\n    \"prompt\" | \"granted\" | \"denied\"\r\n  >(\"prompt\");\r\n  const [showMicPrompt, setShowMicPrompt] = useState(false);\r\n\r\n  const [webrtcState, webrtcActions] = useRealtimeWebRTC();\r\n\r\n  // Check microphone permission first\r\n  useEffect(() => {\r\n    const checkMicPermission = async () => {\r\n      try {\r\n        const result = await navigator.permissions.query({\r\n          name: \"microphone\" as PermissionName,\r\n        });\r\n\r\n        if (result.state === \"granted\") {\r\n          setMicPermission(\"granted\");\r\n        } else if (result.state === \"denied\") {\r\n          setMicPermission(\"denied\");\r\n          setShowError(true);\r\n        } else {\r\n          setMicPermission(\"prompt\");\r\n          setShowMicPrompt(true);\r\n        }\r\n      } catch (error) {\r\n        // Fallback: just show prompt\r\n        setShowMicPrompt(true);\r\n      }\r\n    };\r\n\r\n    checkMicPermission();\r\n  }, []);\r\n\r\n  // Initialize session and connect\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    const initializeCall = async () => {\r\n      // Wait for mic permission\r\n      if (micPermission !== \"granted\") return;\r\n\r\n      try {\r\n        // Create session and get token\r\n        const token = await createRealtimeSession({\r\n          prompt:\r\n            \"jadi seorang psikolog yang membantu menyelesaikan masalah user\",\r\n          voice: \"alloy\",\r\n        });\r\n\r\n        if (!mounted) return;\r\n\r\n        console.log(\"Token received:\", token);\r\n        console.log(\"Connecting WebRTC...\");\r\n\r\n        // Connect WebRTC with token\r\n        await webrtcActions.connect(token);\r\n      } catch (error) {\r\n        console.error(\"Failed to initialize call:\", error);\r\n        if (mounted) {\r\n          setShowError(true);\r\n        }\r\n      }\r\n    };\r\n\r\n    initializeCall();\r\n\r\n    return () => {\r\n      mounted = false;\r\n      webrtcActions.disconnect();\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [micPermission]);\r\n\r\n  // Call duration timer\r\n  useEffect(() => {\r\n    if (webrtcState.status === \"connected\") {\r\n      const interval = setInterval(() => {\r\n        setCallDuration((prev) => prev + 1);\r\n      }, 1000);\r\n\r\n      return () => clearInterval(interval);\r\n    }\r\n  }, [webrtcState.status]);\r\n\r\n  const formatDuration = (seconds: number) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins.toString().padStart(2, \"0\")}:${secs\r\n      .toString()\r\n      .padStart(2, \"0\")}`;\r\n  };\r\n\r\n  const handleEndCall = () => {\r\n    webrtcActions.disconnect();\r\n    onEndCall();\r\n  };\r\n\r\n  const handleAllowMicrophone = async () => {\r\n    try {\r\n      // Request microphone access\r\n      const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\r\n      stream.getTracks().forEach((track) => track.stop()); // Stop immediately\r\n\r\n      setMicPermission(\"granted\");\r\n      setShowMicPrompt(false);\r\n    } catch (error) {\r\n      console.error(\"Microphone permission denied:\", error);\r\n      setMicPermission(\"denied\");\r\n      setShowMicPrompt(false);\r\n      setShowError(true);\r\n    }\r\n  };\r\n\r\n  const handleRetry = async () => {\r\n    setIsRetrying(true);\r\n    setShowError(false);\r\n\r\n    try {\r\n      // Disconnect first\r\n      webrtcActions.disconnect();\r\n\r\n      // Wait a bit\r\n      await new Promise((resolve) => setTimeout(resolve, 500));\r\n\r\n      const token = await createRealtimeSession({\r\n        prompt:\r\n          \"jadi seorang psikolog yang membantu menyelesaikan masalah user\",\r\n        voice: \"alloy\",\r\n      });\r\n\r\n      await webrtcActions.connect(token);\r\n    } catch (error) {\r\n      console.error(\"Retry failed:\", error);\r\n      setShowError(true);\r\n    } finally {\r\n      setIsRetrying(false);\r\n    }\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    switch (webrtcState.status) {\r\n      case \"connecting\":\r\n        return \"Menghubungkan...\";\r\n      case \"connected\":\r\n        return webrtcState.isMuted\r\n          ? \"Terhubung • Mic Mati\"\r\n          : \"Terhubung • Mic Aktif\";\r\n      case \"error\":\r\n        return \"Koneksi Gagal\";\r\n      case \"disconnected\":\r\n        return \"Terputus\";\r\n      default:\r\n        return \"Memulai...\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      exit={{ opacity: 0 }}\r\n      className=\"fixed inset-0 z-50\"\r\n      style={{\r\n        background: \"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)\",\r\n      }}\r\n    >\r\n      {/* Subtle Background Pattern */}\r\n      <div className=\"absolute inset-0 opacity-5\">\r\n        <div className=\"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(59,130,246,0.3),transparent_50%)]\" />\r\n      </div>\r\n\r\n      {/* Main Content */}\r\n      <div className=\"relative h-full flex flex-col items-center justify-between py-16 px-8\">\r\n        {/* Top Section - Avatar & Status */}\r\n        <div className=\"flex flex-col items-center gap-8 mt-16\">\r\n          {/* Avatar with pulse animation */}\r\n          <motion.div\r\n            initial={{ scale: 0.8, opacity: 0 }}\r\n            animate={{ scale: 1, opacity: 1 }}\r\n            transition={{ duration: 0.5 }}\r\n            className=\"relative\"\r\n          >\r\n            <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center shadow-2xl ring-4 ring-white/10\">\r\n              <span className=\"text-white text-5xl font-bold\">\r\n                {contactAvatar || \"AI\"}\r\n              </span>\r\n            </div>\r\n\r\n            {/* Pulse rings for connecting state */}\r\n            {(webrtcState.status === \"connecting\" ||\r\n              webrtcState.status === \"idle\") && (\r\n              <>\r\n                <motion.div\r\n                  className=\"absolute inset-0 rounded-full border-4 border-blue-400/30\"\r\n                  animate={{ scale: [1, 1.4, 1.4], opacity: [0.6, 0, 0] }}\r\n                  transition={{ duration: 2, repeat: Infinity }}\r\n                />\r\n                <motion.div\r\n                  className=\"absolute inset-0 rounded-full border-4 border-blue-400/30\"\r\n                  animate={{ scale: [1, 1.6, 1.6], opacity: [0.6, 0, 0] }}\r\n                  transition={{ duration: 2, repeat: Infinity, delay: 0.5 }}\r\n                />\r\n              </>\r\n            )}\r\n\r\n            {/* Active indicator for connected state */}\r\n            {webrtcState.status === \"connected\" && (\r\n              <motion.div\r\n                className=\"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full border-4 border-slate-900\"\r\n                initial={{ scale: 0 }}\r\n                animate={{ scale: 1 }}\r\n                transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\r\n              />\r\n            )}\r\n          </motion.div>\r\n\r\n          {/* Contact Name & Status */}\r\n          <motion.div\r\n            initial={{ y: 20, opacity: 0 }}\r\n            animate={{ y: 0, opacity: 1 }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"text-center\"\r\n          >\r\n            <h1 className=\"text-4xl font-semibold text-white mb-3 tracking-tight\">\r\n              {contactName}\r\n            </h1>\r\n            <AnimatePresence mode=\"wait\">\r\n              <motion.p\r\n                key={webrtcState.status}\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                exit={{ opacity: 0, y: -10 }}\r\n                className=\"text-lg text-white/70\"\r\n              >\r\n                {getStatusText()}\r\n              </motion.p>\r\n            </AnimatePresence>\r\n\r\n            {webrtcState.status === \"connected\" && (\r\n              <motion.p\r\n                initial={{ opacity: 0 }}\r\n                animate={{ opacity: 1 }}\r\n                className=\"text-lg text-white/50 font-mono mt-1\"\r\n              >\r\n                {formatDuration(callDuration)}\r\n              </motion.p>\r\n            )}\r\n\r\n            {/* Transcript Display */}\r\n            {webrtcState.transcript && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"mt-6 max-w-md px-6 py-3 bg-white/10 backdrop-blur-md rounded-2xl\"\r\n              >\r\n                <p className=\"text-sm text-white/60 mb-1\">Anda:</p>\r\n                <p className=\"text-white\">{webrtcState.transcript}</p>\r\n              </motion.div>\r\n            )}\r\n\r\n            {/* AI Response Display */}\r\n            {webrtcState.aiResponse && (\r\n              <motion.div\r\n                initial={{ opacity: 0, y: 10 }}\r\n                animate={{ opacity: 1, y: 0 }}\r\n                className=\"mt-4 max-w-md px-6 py-3 bg-blue-500/20 backdrop-blur-md rounded-2xl border border-blue-400/30\"\r\n              >\r\n                <p className=\"text-sm text-blue-300 mb-1\">Psikolog AI:</p>\r\n                <p className=\"text-white\">{webrtcState.aiResponse}</p>\r\n              </motion.div>\r\n            )}\r\n          </motion.div>\r\n        </div>\r\n\r\n        {/* Bottom Section - Controls */}\r\n        <motion.div\r\n          initial={{ y: 50, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ delay: 0.4 }}\r\n          className=\"w-full max-w-md mb-12\"\r\n        >\r\n          {/* Control Buttons */}\r\n          <div className=\"flex items-center justify-center gap-8 mb-12\">\r\n            {/* Mute Button */}\r\n            <motion.button\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n              onClick={webrtcActions.toggleMute}\r\n              disabled={webrtcState.status !== \"connected\"}\r\n              className={`w-14 h-14 rounded-full transition-all shadow-lg ${\r\n                webrtcState.isMuted\r\n                  ? \"bg-red-500 hover:bg-red-600\"\r\n                  : \"bg-white/10 hover:bg-white/20 backdrop-blur-md\"\r\n              } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n              aria-label={webrtcState.isMuted ? \"Unmute\" : \"Mute\"}\r\n            >\r\n              {webrtcState.isMuted ? (\r\n                <MicOff className=\"w-6 h-6 text-white mx-auto\" />\r\n              ) : (\r\n                <Mic className=\"w-6 h-6 text-white mx-auto\" />\r\n              )}\r\n            </motion.button>\r\n\r\n            {/* Speaker Button */}\r\n            <motion.button\r\n              whileHover={{ scale: 1.05 }}\r\n              whileTap={{ scale: 0.95 }}\r\n              onClick={() => setIsSpeakerOn(!isSpeakerOn)}\r\n              className={`w-14 h-14 rounded-full transition-all shadow-lg ${\r\n                !isSpeakerOn\r\n                  ? \"bg-red-500 hover:bg-red-600\"\r\n                  : \"bg-white/10 hover:bg-white/20 backdrop-blur-md\"\r\n              }`}\r\n              aria-label={isSpeakerOn ? \"Turn off speaker\" : \"Turn on speaker\"}\r\n            >\r\n              {isSpeakerOn ? (\r\n                <Volume2 className=\"w-6 h-6 text-white mx-auto\" />\r\n              ) : (\r\n                <VolumeX className=\"w-6 h-6 text-white mx-auto\" />\r\n              )}\r\n            </motion.button>\r\n          </div>\r\n\r\n          {/* End Call Button */}\r\n          <motion.button\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n            onClick={handleEndCall}\r\n            className=\"w-full py-4 rounded-full bg-red-500 hover:bg-red-600 transition-all shadow-2xl flex items-center justify-center gap-3\"\r\n            aria-label=\"End call\"\r\n          >\r\n            <PhoneOff className=\"w-6 h-6 text-white\" />\r\n            <span className=\"text-white font-semibold text-lg\">\r\n              Akhiri Panggilan\r\n            </span>\r\n          </motion.button>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Audio wave visualization (based on actual audio level) */}\r\n      {webrtcState.status === \"connected\" && !webrtcState.isMuted && (\r\n        <div className=\"absolute bottom-64 left-1/2 -translate-x-1/2 flex items-center gap-1.5\">\r\n          {[...Array(7)].map((_, i) => {\r\n            const baseHeight = 8;\r\n            const maxHeight = 32;\r\n            const height =\r\n              baseHeight + webrtcState.audioLevel * (maxHeight - baseHeight);\r\n\r\n            return (\r\n              <motion.div\r\n                key={i}\r\n                className=\"w-1.5 bg-gradient-to-t from-blue-500 to-purple-500 rounded-full shadow-lg\"\r\n                animate={{\r\n                  height: [height * 0.5, height, height * 0.5],\r\n                }}\r\n                transition={{\r\n                  duration: 0.6,\r\n                  repeat: Infinity,\r\n                  delay: i * 0.08,\r\n                  ease: \"easeInOut\",\r\n                }}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {/* Microphone Permission Prompt */}\r\n      <AnimatePresence>\r\n        {showMicPrompt && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-6 z-10\"\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.9, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.9, opacity: 0 }}\r\n              className=\"bg-slate-800 rounded-3xl p-8 max-w-md w-full shadow-2xl border border-blue-500/20\"\r\n            >\r\n              <div className=\"flex items-center gap-4 mb-4\">\r\n                <div className=\"w-12 h-12 rounded-full bg-blue-500/20 flex items-center justify-center\">\r\n                  <Mic className=\"w-6 h-6 text-blue-500\" />\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold text-white\">\r\n                  Izin Mikrofon Diperlukan\r\n                </h3>\r\n              </div>\r\n\r\n              <p className=\"text-white/70 mb-6\">\r\n                Aplikasi memerlukan akses ke mikrofon Anda untuk melakukan\r\n                panggilan suara dengan AI Psikolog.\r\n              </p>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <motion.button\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  onClick={handleAllowMicrophone}\r\n                  className=\"flex-1 py-3 rounded-xl bg-blue-500 hover:bg-blue-600 transition-all flex items-center justify-center gap-2\"\r\n                >\r\n                  <Mic className=\"w-5 h-5 text-white\" />\r\n                  <span className=\"text-white font-medium\">\r\n                    Izinkan Mikrofon\r\n                  </span>\r\n                </motion.button>\r\n\r\n                <motion.button\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  onClick={handleEndCall}\r\n                  className=\"flex-1 py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-all\"\r\n                >\r\n                  <span className=\"text-white font-medium\">Batal</span>\r\n                </motion.button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n\r\n      {/* Error Modal */}\r\n      <AnimatePresence>\r\n        {(showError || webrtcState.error) && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"absolute inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-6 z-10\"\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.9, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.9, opacity: 0 }}\r\n              className=\"bg-slate-800 rounded-3xl p-8 max-w-md w-full shadow-2xl border border-red-500/20\"\r\n            >\r\n              <div className=\"flex items-center gap-4 mb-4\">\r\n                <div className=\"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center\">\r\n                  <AlertCircle className=\"w-6 h-6 text-red-500\" />\r\n                </div>\r\n                <h3 className=\"text-xl font-semibold text-white\">\r\n                  Koneksi Gagal\r\n                </h3>\r\n              </div>\r\n\r\n              <p className=\"text-white/70 mb-6\">\r\n                {micPermission === \"denied\"\r\n                  ? \"Akses mikrofon ditolak. Silakan aktifkan izin mikrofon di pengaturan browser Anda.\"\r\n                  : webrtcState.error ||\r\n                    \"Tidak dapat terhubung ke server. Silakan coba lagi.\"}\r\n              </p>\r\n\r\n              <div className=\"flex gap-3\">\r\n                <motion.button\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  onClick={handleRetry}\r\n                  disabled={isRetrying}\r\n                  className=\"flex-1 py-3 rounded-xl bg-blue-500 hover:bg-blue-600 transition-all flex items-center justify-center gap-2 disabled:opacity-50\"\r\n                >\r\n                  {isRetrying ? (\r\n                    <>\r\n                      <RefreshCw className=\"w-5 h-5 text-white animate-spin\" />\r\n                      <span className=\"text-white font-medium\">Mencoba...</span>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <RefreshCw className=\"w-5 h-5 text-white\" />\r\n                      <span className=\"text-white font-medium\">Coba Lagi</span>\r\n                    </>\r\n                  )}\r\n                </motion.button>\r\n\r\n                <motion.button\r\n                  whileHover={{ scale: 1.02 }}\r\n                  whileTap={{ scale: 0.98 }}\r\n                  onClick={handleEndCall}\r\n                  className=\"flex-1 py-3 rounded-xl bg-white/10 hover:bg-white/20 transition-all\"\r\n                >\r\n                  <span className=\"text-white font-medium\">Tutup</span>\r\n                </motion.button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </motion.div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1519, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/hooks/useChat.ts"],"sourcesContent":["import { useState } from 'react';\r\n\r\nexport interface Message {\r\n  id: string;\r\n  text: string;\r\n  sender: 'user' | 'ai';\r\n  timestamp: Date;\r\n}\r\n\r\nexport function useChat() {\r\n  const [messages, setMessages] = useState<Message[]>([]);\r\n  const [isTyping, setIsTyping] = useState(false);\r\n\r\n  const sendMessage = (text: string) => {\r\n    // Add user message\r\n    const userMessage: Message = {\r\n      id: `user-${Date.now()}`,\r\n      text,\r\n      sender: 'user',\r\n      timestamp: new Date(),\r\n    };\r\n\r\n    setMessages((prev) => [...prev, userMessage]);\r\n\r\n    // Simulate AI typing\r\n    setIsTyping(true);\r\n\r\n    // Simulate AI response with delay\r\n    setTimeout(() => {\r\n      const aiMessage: Message = {\r\n        id: `ai-${Date.now()}`,\r\n        text: `Terima kasih atas pesan Anda: \"${text}\". Saya adalah AI Assistant dan siap membantu Anda!`,\r\n        sender: 'ai',\r\n        timestamp: new Date(),\r\n      };\r\n\r\n      setMessages((prev) => [...prev, aiMessage]);\r\n      setIsTyping(false);\r\n    }, 1500); // 1.5 second delay for realistic feel\r\n  };\r\n\r\n  return {\r\n    messages,\r\n    isTyping,\r\n    sendMessage,\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AASO,SAAS;IACd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAY,EAAE;IACtD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,MAAM,cAAc,CAAC;QACnB,mBAAmB;QACnB,MAAM,cAAuB;YAC3B,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;YACxB;YACA,QAAQ;YACR,WAAW,IAAI;QACjB;QAEA,YAAY,CAAC,OAAS;mBAAI;gBAAM;aAAY;QAE5C,qBAAqB;QACrB,YAAY;QAEZ,kCAAkC;QAClC,WAAW;YACT,MAAM,YAAqB;gBACzB,IAAI,CAAC,GAAG,EAAE,KAAK,GAAG,IAAI;gBACtB,MAAM,CAAC,+BAA+B,EAAE,KAAK,mDAAmD,CAAC;gBACjG,QAAQ;gBACR,WAAW,IAAI;YACjB;YAEA,YAAY,CAAC,OAAS;uBAAI;oBAAM;iBAAU;YAC1C,YAAY;QACd,GAAG,OAAO,sCAAsC;IAClD;IAEA,OAAO;QACL;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 1567, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Mrian07/Documents/BACKUP-E/KERJA/ceritain-realtime/components/ChatPage.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport { AnimatePresence, motion } from \"framer-motion\";\r\nimport { MessageCircle, Loader2 } from \"lucide-react\";\r\nimport { HeaderBar } from \"./HeaderBar\";\r\nimport { ChatBubble } from \"./ChatBubble\";\r\nimport { InputBar } from \"./InputBar\";\r\nimport { CallPage } from \"./CallPage\";\r\nimport { useChat } from \"@/hooks/useChat\";\r\n\r\nexport function ChatPage() {\r\n  const { messages, isTyping, sendMessage } = useChat();\r\n  const chatContainerRef = useRef<HTMLDivElement>(null);\r\n  const [isCallActive, setIsCallActive] = useState(false);\r\n\r\n  // Auto-scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    if (chatContainerRef.current) {\r\n      chatContainerRef.current.scrollTo({\r\n        top: chatContainerRef.current.scrollHeight,\r\n        behavior: \"smooth\",\r\n      });\r\n    }\r\n  }, [messages, isTyping]);\r\n\r\n  const handleCallClick = () => {\r\n    setIsCallActive(true);\r\n  };\r\n\r\n  const handleEndCall = () => {\r\n    setIsCallActive(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {/* Chat Interface */}\r\n      {!isCallActive && (\r\n        <div className=\"flex flex-col h-screen\">\r\n          <HeaderBar onCallClick={handleCallClick} />\r\n\r\n          {/* Chat Area */}\r\n          <div\r\n            ref={chatContainerRef}\r\n            className=\"flex-1 overflow-y-auto px-4 py-6 pb-24\"\r\n            style={{\r\n              background:\r\n                \"linear-gradient(to bottom, var(--background), var(--surface))\",\r\n            }}\r\n          >\r\n            <div className=\"max-w-4xl mx-auto\">\r\n              {/* Empty State */}\r\n              {messages.length === 0 && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 20 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  transition={{ duration: 0.5 }}\r\n                  className=\"flex flex-col items-center justify-center h-full min-h-[400px] text-center px-4\"\r\n                >\r\n                  <div\r\n                    className=\"w-20 h-20 rounded-full flex items-center justify-center mb-6 shadow-lg\"\r\n                    style={{\r\n                      backgroundColor: \"var(--surface-elevated)\",\r\n                    }}\r\n                  >\r\n                    <MessageCircle\r\n                      className=\"w-10 h-10\"\r\n                      style={{ color: \"var(--accent)\" }}\r\n                    />\r\n                  </div>\r\n                  <h2\r\n                    className=\"text-2xl font-semibold mb-2 tracking-tight\"\r\n                    style={{ color: \"var(--foreground)\" }}\r\n                  >\r\n                    Start a Conversation AI\r\n                  </h2>\r\n                  <p\r\n                    className=\"text-sm max-w-md\"\r\n                    style={{ color: \"var(--foreground-secondary)\" }}\r\n                  >\r\n                    Send a message to begin chatting with AI Assistant\r\n                  </p>\r\n                </motion.div>\r\n              )}\r\n\r\n              {/* Messages */}\r\n              {messages.map((message) => (\r\n                <ChatBubble key={message.id} message={message} />\r\n              ))}\r\n\r\n              {/* Typing Indicator */}\r\n              {isTyping && (\r\n                <motion.div\r\n                  initial={{ opacity: 0, y: 10 }}\r\n                  animate={{ opacity: 1, y: 0 }}\r\n                  exit={{ opacity: 0, y: 10 }}\r\n                  className=\"flex justify-start mb-4\"\r\n                >\r\n                  <div\r\n                    className=\"max-w-[75%] rounded-2xl rounded-bl-md px-4 py-3 shadow-sm flex items-center gap-2\"\r\n                    style={{\r\n                      backgroundColor: \"var(--ai-bubble-bg)\",\r\n                      color: \"var(--ai-bubble-text)\",\r\n                    }}\r\n                  >\r\n                    <Loader2 className=\"w-4 h-4 animate-spin\" />\r\n                    <span className=\"text-[15px]\">AI is typing...</span>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <InputBar onSendMessage={sendMessage} />\r\n        </div>\r\n      )}\r\n\r\n      {/* Call Interface */}\r\n      <AnimatePresence>\r\n        {isCallActive && (\r\n          <CallPage onEndCall={handleEndCall} contactName=\"AI Assistant\" />\r\n        )}\r\n      </AnimatePresence>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AATA;;;;;;;;;;AAWO,SAAS;IACd,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,WAAW,EAAE,GAAG,IAAA,2HAAO;IACnD,MAAM,mBAAmB,IAAA,+MAAM,EAAiB;IAChD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAC;IAEjD,iDAAiD;IACjD,IAAA,kNAAS,EAAC;QACR,IAAI,iBAAiB,OAAO,EAAE;YAC5B,iBAAiB,OAAO,CAAC,QAAQ,CAAC;gBAChC,KAAK,iBAAiB,OAAO,CAAC,YAAY;gBAC1C,UAAU;YACZ;QACF;IACF,GAAG;QAAC;QAAU;KAAS;IAEvB,MAAM,kBAAkB;QACtB,gBAAgB;IAClB;IAEA,MAAM,gBAAgB;QACpB,gBAAgB;IAClB;IAEA,qBACE;;YAEG,CAAC,8BACA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,qIAAS;wBAAC,aAAa;;;;;;kCAGxB,8OAAC;wBACC,KAAK;wBACL,WAAU;wBACV,OAAO;4BACL,YACE;wBACJ;kCAEA,cAAA,8OAAC;4BAAI,WAAU;;gCAEZ,SAAS,MAAM,KAAK,mBACnB,8OAAC,oMAAM,CAAC,GAAG;oCACT,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC7B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,YAAY;wCAAE,UAAU;oCAAI;oCAC5B,WAAU;;sDAEV,8OAAC;4CACC,WAAU;4CACV,OAAO;gDACL,iBAAiB;4CACnB;sDAEA,cAAA,8OAAC,yOAAa;gDACZ,WAAU;gDACV,OAAO;oDAAE,OAAO;gDAAgB;;;;;;;;;;;sDAGpC,8OAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO;4CAAoB;sDACrC;;;;;;sDAGD,8OAAC;4CACC,WAAU;4CACV,OAAO;gDAAE,OAAO;4CAA8B;sDAC/C;;;;;;;;;;;;gCAOJ,SAAS,GAAG,CAAC,CAAC,wBACb,8OAAC,uIAAU;wCAAkB,SAAS;uCAArB,QAAQ,EAAE;;;;;gCAI5B,0BACC,8OAAC,oMAAM,CAAC,GAAG;oCACT,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC7B,SAAS;wCAAE,SAAS;wCAAG,GAAG;oCAAE;oCAC5B,MAAM;wCAAE,SAAS;wCAAG,GAAG;oCAAG;oCAC1B,WAAU;8CAEV,cAAA,8OAAC;wCACC,WAAU;wCACV,OAAO;4CACL,iBAAiB;4CACjB,OAAO;wCACT;;0DAEA,8OAAC,4NAAO;gDAAC,WAAU;;;;;;0DACnB,8OAAC;gDAAK,WAAU;0DAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;kCAOxC,8OAAC,mIAAQ;wBAAC,eAAe;;;;;;;;;;;;0BAK7B,8OAAC,4MAAe;0BACb,8BACC,8OAAC,mIAAQ;oBAAC,WAAW;oBAAe,aAAY;;;;;;;;;;;;;AAK1D"}}]
}